services:
  laravel-ci-cd-app:
    build:
      context: .
      dockerfile: ./deployment/php/php.dockerfile
    image: laravel-ci-cd
    container_name: laravel-ci-cd
    restart: always
    environment:
      - TZ=Asia/Jakarta
    networks:
      - personal
  laravel-ci-cd-nginx:
    build:
      context: .
      dockerfile: ./deployment/nginx/nginx.dockerfile
    image: laravel-ci-cd-nginx
    container_name: laravel-ci-cd-nginx
    restart: always
    environment:
      - TZ=Asia/Jakarta
    ports:
      - "127.0.0.1:9000:80"
    networks:
      - personal
    depends_on:
      - laravel-ci-cd-app
networks:
  personal:
    name: personal
    external: true
